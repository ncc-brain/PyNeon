
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Recording class &#8212; PyNeon dev documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=3ce10a4d"></script>
    <script src="../_static/doctools.js?v=fd6eb6e6"></script>
    <script src="../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'reference/recording';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="BaseTabular Class" href="base_tabular.html" />
    <link rel="prev" title="Dataset class" href="dataset.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">PyNeon dev documentation</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../tutorials/index.html">
    Tutorials
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    API reference
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/ncc-brain/PyNeon" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../tutorials/index.html">
    Tutorials
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    API reference
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/ncc-brain/PyNeon" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="dataset.html">Dataset class</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Recording class</a></li>
<li class="toctree-l1"><a class="reference internal" href="base_tabular.html">BaseTabular Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="stream.html">Stream class (gaze, eye states, IMU)</a></li>
<li class="toctree-l1"><a class="reference internal" href="events.html">Events class (blinks, fixations, saccades, events)</a></li>
<li class="toctree-l1"><a class="reference internal" href="epochs.html">Epochs class</a></li>
<li class="toctree-l1"><a class="reference internal" href="video.html">Video class</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">PyNeon API</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Recording class</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="recording-class">
<h1>Recording class<a class="headerlink" href="#recording-class" title="Link to this heading">#</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="pyneon.Recording">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">pyneon.</span></span><span class="sig-name descname"><span class="pre">Recording</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recording_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.14)"><span class="pre">Path</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyneon.Recording" title="Link to this definition">#</a></dt>
<dd><p>Container of a multi-modal recording with streams, events, and videos.</p>
<p>The recording directory is expected to follow either the Pupil Cloud format
(tested with data format version &gt;= 2.3) or the native Pupil Labs format.
(tested with data format version &gt;= 2.5).
In both cases, the directory must contain an <code class="docutils literal notranslate"><span class="pre">info.json</span></code> file.</p>
<p>Example Pupil Cloud recording directory structure:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>recording_dir/
├── 3d_eye_states.csv
├── blinks.csv
├── events.csv
├── fixations.csv
├── gaze.csv
├── imu.csv
├── saccades.csv
├── info.json (REQUIRED)
├── labels.csv
├── saccades.csv
├── scene_camera.json
├── world_timestamps.csv
└── *.mp4
</pre></div>
</div>
<p>Example native Pupil Labs recording directory structure:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>recording_dir/
├── blinks ps1.raw
├── blinks ps1.time
├── blinks.dtype
├── calibration.bin
├── event.time
├── event.txt
├── ...
├── gaze ps1.raw
├── gaze ps1.time
├── gaze.dtype
├── ...
├── info.json (REQUIRED)
├── Neon Scene Camera v1 ps1.mp4
├── Neon Scene Camera v1 ps1.time
├── Neon Sensor Module v1 ps1.mp4
├── Neon Sensor Module v1 ps1.time
├── ...
├── wearer.json
├── worn ps1.raw
└── worn.dtype
</pre></div>
</div>
<p>Streams, events, and scene video will be located but not loaded until
accessed as properties such as <code class="docutils literal notranslate"><span class="pre">gaze</span></code>, <code class="docutils literal notranslate"><span class="pre">imu</span></code>, and <code class="docutils literal notranslate"><span class="pre">eye_states</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>recording_dir</strong><span class="classifier">str or pathlib.Path</span></dt><dd><p>Path to the directory containing the recording.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Attributes<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>recording_id</strong><span class="classifier">str</span></dt><dd><p>Recording ID.</p>
</dd>
<dt><strong>recording_dir</strong><span class="classifier">pathlib.Path</span></dt><dd><p>Path to the recording directory.</p>
</dd>
<dt><strong>format</strong><span class="classifier">{‘cloud’, ‘native’}</span></dt><dd><p>Recording format, either “cloud” for Pupil Cloud format or “native” for
native format.</p>
</dd>
<dt><strong>info</strong><span class="classifier">dict</span></dt><dd><p>Information about the recording. Read from <code class="docutils literal notranslate"><span class="pre">info.json</span></code>. For details, see
<a class="reference external" href="https://docs.pupil-labs.com/neon/data-collection/data-format/#info-json">https://docs.pupil-labs.com/neon/data-collection/data-format/#info-json</a>.</p>
</dd>
<dt><strong>data_format_version</strong><span class="classifier">str | None</span></dt><dd><p>Data format version as in <code class="docutils literal notranslate"><span class="pre">info.json</span></code>.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pyneon.Recording.clear_der_dir" title="pyneon.Recording.clear_der_dir"><code class="xref py py-obj docutils literal notranslate"><span class="pre">clear_der_dir</span></code></a>([include, exclude])</p></td>
<td><p>Clear the derived data directory by removing files and folders.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pyneon.Recording.concat_events" title="pyneon.Recording.concat_events"><code class="xref py py-obj docutils literal notranslate"><span class="pre">concat_events</span></code></a>(event_names)</p></td>
<td><p>Concatenate different events.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pyneon.Recording.concat_streams" title="pyneon.Recording.concat_streams"><code class="xref py py-obj docutils literal notranslate"><span class="pre">concat_streams</span></code></a>(stream_names[, ...])</p></td>
<td><p>Concatenate data from different streams under common timestamps.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pyneon.Recording.detect_apriltags" title="pyneon.Recording.detect_apriltags"><code class="xref py py-obj docutils literal notranslate"><span class="pre">detect_apriltags</span></code></a>([tag_family, overwrite, ...])</p></td>
<td><p>Detect AprilTags in a video and return their positions per frame.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pyneon.Recording.estimate_camera_pose" title="pyneon.Recording.estimate_camera_pose"><code class="xref py py-obj docutils literal notranslate"><span class="pre">estimate_camera_pose</span></code></a>(tag_locations_df[, ...])</p></td>
<td><p>Compute the camera pose (R|t) for every frame.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pyneon.Recording.estimate_scanpath" title="pyneon.Recording.estimate_scanpath"><code class="xref py py-obj docutils literal notranslate"><span class="pre">estimate_scanpath</span></code></a>([sync_gaze, lk_params, ...])</p></td>
<td><p>Estimate scanpaths by propagating fixations across frames with Lucas-Kanade.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pyneon.Recording.export_cloud_format" title="pyneon.Recording.export_cloud_format"><code class="xref py py-obj docutils literal notranslate"><span class="pre">export_cloud_format</span></code></a>(target_dir[, rebase])</p></td>
<td><p>Export native data to cloud-like format.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pyneon.Recording.export_eye_bids" title="pyneon.Recording.export_eye_bids"><code class="xref py py-obj docutils literal notranslate"><span class="pre">export_eye_bids</span></code></a>(output_dir[, prefix, ...])</p></td>
<td><p>Export eye-tracking data to Eye-tracking-BIDS format.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pyneon.Recording.export_motion_bids" title="pyneon.Recording.export_motion_bids"><code class="xref py py-obj docutils literal notranslate"><span class="pre">export_motion_bids</span></code></a>(motion_dir[, prefix, ...])</p></td>
<td><p>Export IMU data to Motion-BIDS format.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pyneon.Recording.find_homographies" title="pyneon.Recording.find_homographies"><code class="xref py py-obj docutils literal notranslate"><span class="pre">find_homographies</span></code></a>(tag_info[, ...])</p></td>
<td><p>Compute and return homographies for each frame using AprilTag detections and reference marker layout.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pyneon.Recording.fixations_on_surface" title="pyneon.Recording.fixations_on_surface"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fixations_on_surface</span></code></a>([gaze_on_surface, ...])</p></td>
<td><p>Project fixation events into surface space by summarizing gaze samples.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pyneon.Recording.gaze_on_surface" title="pyneon.Recording.gaze_on_surface"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gaze_on_surface</span></code></a>([homographies, tag_info, ...])</p></td>
<td><p>Project gaze coordinates from eye space to surface space using homographies.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pyneon.Recording.overlay_detections_and_pose" title="pyneon.Recording.overlay_detections_and_pose"><code class="xref py py-obj docutils literal notranslate"><span class="pre">overlay_detections_and_pose</span></code></a>(...[, ...])</p></td>
<td><p>Overlay AprilTag detections and camera poses on the video frames.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pyneon.Recording.overlay_scanpath" title="pyneon.Recording.overlay_scanpath"><code class="xref py py-obj docutils literal notranslate"><span class="pre">overlay_scanpath</span></code></a>([scanpath, show_video, ...])</p></td>
<td><p>Render a video with the scan-path overlaid.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pyneon.Recording.plot_distribution" title="pyneon.Recording.plot_distribution"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_distribution</span></code></a>([heatmap_source, ...])</p></td>
<td><p>Plot a heatmap of gaze or fixation data on a matplotlib axis.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pyneon.Recording.smooth_camera_pose" title="pyneon.Recording.smooth_camera_pose"><code class="xref py py-obj docutils literal notranslate"><span class="pre">smooth_camera_pose</span></code></a>([camera_pose_raw, ...])</p></td>
<td><p>Kalman-smooth camera positions and gate outliers.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pyneon.Recording.sync_gaze_to_video" title="pyneon.Recording.sync_gaze_to_video"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sync_gaze_to_video</span></code></a>([window_size, overwrite, ...])</p></td>
<td><p>Synchronize gaze data to video frames by applying windowed averaging around timestamps of each video frame.</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py property">
<dt class="sig sig-object py" id="pyneon.Recording.gaze">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">gaze</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="stream.html#pyneon.Stream" title="pyneon.stream.Stream"><span class="pre">Stream</span></a></span><a class="headerlink" href="#pyneon.Recording.gaze" title="Link to this definition">#</a></dt>
<dd><p>Return a cached <a class="reference internal" href="stream.html#pyneon.Stream" title="pyneon.Stream"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyneon.Stream</span></code></a> object containing gaze data.</p>
<p>For <strong>Pupil Cloud</strong> recordings, the data is loaded from <code class="docutils literal notranslate"><span class="pre">gaze.csv</span></code>.</p>
<p>For <strong>native</strong> recordings, the data is loaded from <code class="docutils literal notranslate"><span class="pre">gaze_200hz.raw</span></code> (if present;
otherwise from <code class="docutils literal notranslate"><span class="pre">gaze</span> <span class="pre">ps1.raw</span></code>) along with the corresponding <code class="docutils literal notranslate"><span class="pre">.time</span></code> and
<code class="docutils literal notranslate"><span class="pre">.dtype</span></code> files.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pyneon.Recording.imu">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">imu</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="stream.html#pyneon.Stream" title="pyneon.stream.Stream"><span class="pre">Stream</span></a></span><a class="headerlink" href="#pyneon.Recording.imu" title="Link to this definition">#</a></dt>
<dd><p>Return a cached <a class="reference internal" href="stream.html#pyneon.Stream" title="pyneon.Stream"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyneon.Stream</span></code></a> object containing IMU data.</p>
<p>For <strong>Pupil Cloud</strong> recordings, the data is loaded from <code class="docutils literal notranslate"><span class="pre">imu.csv</span></code>.</p>
<p>For <strong>native</strong> recordings, the data is loaded from <code class="docutils literal notranslate"><span class="pre">imu</span> <span class="pre">ps1.raw</span></code>, along with
the corresponding <code class="docutils literal notranslate"><span class="pre">.time</span></code> and <code class="docutils literal notranslate"><span class="pre">.dtype</span></code> files.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pyneon.Recording.eye_states">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">eye_states</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="stream.html#pyneon.Stream" title="pyneon.stream.Stream"><span class="pre">Stream</span></a></span><a class="headerlink" href="#pyneon.Recording.eye_states" title="Link to this definition">#</a></dt>
<dd><p>Returns a (cached) <a class="reference internal" href="stream.html#pyneon.Stream" title="pyneon.Stream"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyneon.Stream</span></code></a> object containing eye states data.</p>
<p>For <strong>Pupil Cloud</strong> recordings, the data is loaded from <code class="docutils literal notranslate"><span class="pre">3d_eye_states.csv</span></code>.</p>
<p>For <strong>native</strong> recordings, the data is loaded from <code class="docutils literal notranslate"><span class="pre">eye_state</span> <span class="pre">ps1.raw</span></code>, along
with the corresponding <code class="docutils literal notranslate"><span class="pre">.time</span></code> and <code class="docutils literal notranslate"><span class="pre">.dtype</span></code> files.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pyneon.Recording.blinks">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">blinks</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="events.html#pyneon.Events" title="pyneon.events.Events"><span class="pre">Events</span></a></span><a class="headerlink" href="#pyneon.Recording.blinks" title="Link to this definition">#</a></dt>
<dd><p>Return a cached <a class="reference internal" href="events.html#pyneon.Events" title="pyneon.Events"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyneon.Events</span></code></a> object containing blink event data.</p>
<p>For <strong>Pupil Cloud</strong> recordings, the data is loaded from <code class="docutils literal notranslate"><span class="pre">blinks.csv</span></code>.</p>
<p>For <strong>native</strong> recordings, the data is loaded from <code class="docutils literal notranslate"><span class="pre">blinks</span> <span class="pre">ps1.raw</span></code>, along with
the corresponding <code class="docutils literal notranslate"><span class="pre">.time</span></code> and <code class="docutils literal notranslate"><span class="pre">.dtype</span></code> files.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pyneon.Recording.fixations">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">fixations</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="events.html#pyneon.Events" title="pyneon.events.Events"><span class="pre">Events</span></a></span><a class="headerlink" href="#pyneon.Recording.fixations" title="Link to this definition">#</a></dt>
<dd><p>Returns a (cached) <a class="reference internal" href="events.html#pyneon.Events" title="pyneon.Events"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyneon.Events</span></code></a> object containing fixations data.</p>
<p>For <strong>Pupil Cloud</strong> recordings, the data is loaded from <code class="docutils literal notranslate"><span class="pre">fixations.csv</span></code>.</p>
<p>For <strong>native</strong> recordings, the data is loaded from <code class="docutils literal notranslate"><span class="pre">fixations</span> <span class="pre">ps1.raw</span></code>,
along with the corresponding <code class="docutils literal notranslate"><span class="pre">.time</span></code> and <code class="docutils literal notranslate"><span class="pre">.dtype</span></code> files.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pyneon.Recording.saccades">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">saccades</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="events.html#pyneon.Events" title="pyneon.events.Events"><span class="pre">Events</span></a></span><a class="headerlink" href="#pyneon.Recording.saccades" title="Link to this definition">#</a></dt>
<dd><p>Returns a (cached) <a class="reference internal" href="events.html#pyneon.Events" title="pyneon.Events"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyneon.Events</span></code></a> object containing saccades data.</p>
<p>For <strong>Pupil Cloud</strong> recordings, the data is loaded from <code class="docutils literal notranslate"><span class="pre">saccades.csv</span></code>.</p>
<p>For <strong>native</strong> recordings, the data is loaded from <code class="docutils literal notranslate"><span class="pre">fixations</span> <span class="pre">ps1.raw</span></code>,
along with the corresponding <code class="docutils literal notranslate"><span class="pre">.time</span></code> and <code class="docutils literal notranslate"><span class="pre">.dtype</span></code> files.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pyneon.Recording.events">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">events</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="events.html#pyneon.Events" title="pyneon.events.Events"><span class="pre">Events</span></a></span><a class="headerlink" href="#pyneon.Recording.events" title="Link to this definition">#</a></dt>
<dd><p>Returns a (cached) <a class="reference internal" href="events.html#pyneon.Events" title="pyneon.Events"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyneon.Events</span></code></a> object containing events data.</p>
<p>For <strong>Pupil Cloud</strong> recordings, the events data is loaded from <code class="docutils literal notranslate"><span class="pre">events.csv</span></code>.</p>
<p>For <strong>native</strong> recordings, the events data is loaded from <code class="docutils literal notranslate"><span class="pre">event.txt</span></code> and
<code class="docutils literal notranslate"><span class="pre">event.time</span></code>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pyneon.Recording.scene_video">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">scene_video</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="video.html#pyneon.Video" title="pyneon.video.video.Video"><span class="pre">Video</span></a></span><a class="headerlink" href="#pyneon.Recording.scene_video" title="Link to this definition">#</a></dt>
<dd><p>Returns a (cached) <a class="reference internal" href="video.html#pyneon.Video" title="pyneon.Video"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyneon.Video</span></code></a> object containing scene video data.</p>
<p>For <strong>Pupil Cloud</strong> recordings, the video is loaded from the only <code class="docutils literal notranslate"><span class="pre">*.mp4</span></code> file
in the recording directory.</p>
<p>For <strong>native</strong> recordings, the video is loaded from the <code class="docutils literal notranslate"><span class="pre">Neon</span> <span class="pre">Scene</span> <span class="pre">Camera*.mp4</span></code>
file in the recording directory.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pyneon.Recording.eye_video">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">eye_video</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="video.html#pyneon.Video" title="pyneon.video.video.Video"><span class="pre">Video</span></a></span><a class="headerlink" href="#pyneon.Recording.eye_video" title="Link to this definition">#</a></dt>
<dd><p>Returns a (cached) <a class="reference internal" href="video.html#pyneon.Video" title="pyneon.Video"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyneon.Video</span></code></a> object containing eye video data.</p>
<p>Eye video is only available for <strong>native</strong> recordings and is loaded from the
<code class="docutils literal notranslate"><span class="pre">Neon</span> <span class="pre">Sensor</span> <span class="pre">Module*.mp4</span></code> file in the recording directory.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pyneon.Recording.start_time">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">start_time</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><a class="headerlink" href="#pyneon.Recording.start_time" title="Link to this definition">#</a></dt>
<dd><p>Start time (in ns) of the recording as in <code class="docutils literal notranslate"><span class="pre">info.json</span></code>.
May not match the start time of each data stream.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pyneon.Recording.start_datetime">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">start_datetime</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.14)"><span class="pre">datetime</span></a></span><a class="headerlink" href="#pyneon.Recording.start_datetime" title="Link to this definition">#</a></dt>
<dd><p>Start time (datetime) of the recording as in <code class="docutils literal notranslate"><span class="pre">info.json</span></code>.
May not match the start time of each data stream.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyneon.Recording.concat_streams">
<span class="sig-name descname"><span class="pre">concat_streams</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stream_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.14)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampling_freq</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/numbers.html#numbers.Number" title="(in Python v3.14)"><span class="pre">Number</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'min'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">float_kind</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'linear'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">other_kind</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'nearest'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="stream.html#pyneon.Stream" title="pyneon.stream.Stream"><span class="pre">Stream</span></a></span></span><a class="headerlink" href="#pyneon.Recording.concat_streams" title="Link to this definition">#</a></dt>
<dd><p>Concatenate data from different streams under common timestamps.
Since the streams may have different timestamps and sampling frequencies,
resampling of all streams to a set of common timestamps is performed.
The latest start timestamp and earliest last timestamp of the selected sreams
are used to define the common timestamps.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>stream_names</strong><span class="classifier">str or list of str</span></dt><dd><p>Stream names to concatenate. If “all”, then all streams will be used.
If a list, items must be in <code class="docutils literal notranslate"><span class="pre">{&quot;gaze&quot;,</span> <span class="pre">&quot;imu&quot;,</span> <span class="pre">&quot;eye_states&quot;}</span></code>
(“3d_eye_states” is also tolerated as an alias for “eye_states”).</p>
</dd>
<dt><strong>sampling_freq</strong><span class="classifier">float or int or str, optional</span></dt><dd><p>Sampling frequency of the concatenated streams.
If numeric, the streams will be interpolated to this frequency.
If “min” (default), the lowest nominal sampling frequency
of the selected streams will be used.
If “max”, the highest nominal sampling frequency will be used.</p>
</dd>
<dt><strong>float_kind</strong><span class="classifier">str, optional</span></dt><dd><p>Kind of interpolation applied on columns of float type,
Defaults to “linear”. For details see <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.interp1d.html#scipy.interpolate.interp1d" title="(in SciPy v1.17.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">scipy.interpolate.interp1d</span></code></a>.</p>
</dd>
<dt><strong>other_kind</strong><span class="classifier">str, optional</span></dt><dd><p>Kind of interpolation applied on columns of other types,
Defaults to “nearest”. Only “nearest”, “previous”, and “next” are recommended.</p>
</dd>
<dt><strong>inplace</strong><span class="classifier">bool, optional</span></dt><dd><p>Replace selected stream data with interpolated data during concatenation
if <code class="docutils literal notranslate"><span class="pre">True</span></code>. Defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>Stream</dt><dd><p>Stream object containing concatenated data.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyneon.Recording.concat_events">
<span class="sig-name descname"><span class="pre">concat_events</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.14)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="events.html#pyneon.Events" title="pyneon.events.Events"><span class="pre">Events</span></a></span></span><a class="headerlink" href="#pyneon.Recording.concat_events" title="Link to this definition">#</a></dt>
<dd><p>Concatenate different events. All columns in the selected event type will be
present in the final DataFrame. An additional “type” column denotes the event
type. If <code class="docutils literal notranslate"><span class="pre">events</span></code> is selected, its “timestamp [ns]” column will be
renamed to “start timestamp [ns]”, and the “name” and “type” columns will
be renamed to “message name” and “message type” respectively to provide
a more readable output.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>event_names</strong><span class="classifier">list of str</span></dt><dd><p>List of event names to concatenate. Event names must be in
<code class="docutils literal notranslate"><span class="pre">{&quot;blinks&quot;,</span> <span class="pre">&quot;fixations&quot;,</span> <span class="pre">&quot;saccades&quot;,</span> <span class="pre">&quot;events&quot;}</span></code>
(singular forms are tolerated).</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>Events</dt><dd><p>Events object containing concatenated data.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyneon.Recording.plot_distribution">
<span class="sig-name descname"><span class="pre">plot_distribution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">heatmap_source</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.14)"><span class="pre">Literal</span></a><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'gaze'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'fixations'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'gaze'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scatter_source</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.14)"><span class="pre">Literal</span></a><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'gaze'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'fixations'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'fixations'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" title="(in Matplotlib v3.10.8)"><span class="pre">Figure</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.10.8)"><span class="pre">Axes</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#pyneon.Recording.plot_distribution" title="Link to this definition">#</a></dt>
<dd><p>Plot a heatmap of gaze or fixation data on a matplotlib axis.
Users can flexibly choose to generate a smoothed heatmap and/or scatter plot and
the source of the data (gaze or fixation).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>rec</strong><span class="classifier">Recording</span></dt><dd><p>Recording object containing the gaze and video data.</p>
</dd>
<dt><strong>heatmap_source</strong><span class="classifier">{‘gaze’, ‘fixations’, None}</span></dt><dd><p>Source of the data to plot as a heatmap. If None, no heatmap is plotted.
Defaults to ‘gaze’.</p>
</dd>
<dt><strong>scatter_source</strong><span class="classifier">{‘gaze’, ‘fixations’, None}</span></dt><dd><p>Source of the data to plot as a scatter plot. If None, no scatter plot is plotted.
Defaults to ‘fixations’. Gaze data is typically more dense and thus less suitable
for scatter plots.</p>
</dd>
<dt><strong>show</strong><span class="classifier">bool</span></dt><dd><p>Show the figure if <code class="docutils literal notranslate"><span class="pre">True</span></code>. Defaults to True.</p>
</dd>
<dt><strong>**kwargs</strong><span class="classifier">keyword arguments</span></dt><dd><dl class="simple">
<dt>Additional parameters for the plot, including:</dt><dd><ul class="simple">
<li><p>‘step_size’: Step size for the heatmap grid. Default is 10.</p></li>
<li><p>‘sigma’: Sigma value for Gaussian smoothing. Default is 2.</p></li>
<li><p>‘width_height’: Width and height of the figure in pixels. Default is (1600, 1200).</p></li>
<li><p>‘cmap’: Colormap for the heatmap. Default is ‘inferno’.</p></li>
<li><p>‘ax’: Matplotlib axis to plot on. If None, a new figure and axis are created.</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>fig</strong><span class="classifier">matplotlib.figure.Figure</span></dt><dd><p>Figure object containing the plot.</p>
</dd>
<dt><strong>ax</strong><span class="classifier">matplotlib.axes.Axes</span></dt><dd><p>Axis object containing the plot.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyneon.Recording.sync_gaze_to_video">
<span class="sig-name descname"><span class="pre">sync_gaze_to_video</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">window_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.14)"><span class="pre">Path</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="stream.html#pyneon.Stream" title="pyneon.stream.Stream"><span class="pre">Stream</span></a></span></span><a class="headerlink" href="#pyneon.Recording.sync_gaze_to_video" title="Link to this definition">#</a></dt>
<dd><p>Synchronize gaze data to video frames by applying windowed averaging
around timestamps of each video frame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>window_size</strong><span class="classifier">int, optional</span></dt><dd><p>Size of the time window in nanoseconds used for averaging.
If None, defaults to the median interval between video frame timestamps.</p>
</dd>
<dt><strong>overwrite</strong><span class="classifier">bool, optional</span></dt><dd><p>If True, force recomputation even if saved data exists. Default is False.</p>
</dd>
<dt><strong>output_path</strong><span class="classifier">str or pathlib.Path, optional</span></dt><dd><p>Path to save the resulting CSV file. Defaults to <cite>&lt;der_dir&gt;/gaze_synced.csv</cite>.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>Stream</dt><dd><dl class="simple">
<dt>A Stream indexed by <cite>“timestamp [ns]”</cite>, containing:</dt><dd><ul class="simple">
<li><p>‘gaze x [px]’: Gaze x-coordinate in pixels</p></li>
<li><p>‘gaze y [px]’: Gaze y-coordinate in pixels</p></li>
<li><p>‘frame_idx’: Index of the video frame corresponding to the gaze data</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyneon.Recording.estimate_scanpath">
<span class="sig-name descname"><span class="pre">estimate_scanpath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sync_gaze</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="stream.html#pyneon.Stream" title="pyneon.stream.Stream"><span class="pre">Stream</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lk_params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.14)"><span class="pre">Path</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="stream.html#pyneon.Stream" title="pyneon.stream.Stream"><span class="pre">Stream</span></a></span></span><a class="headerlink" href="#pyneon.Recording.estimate_scanpath" title="Link to this definition">#</a></dt>
<dd><p>Estimate scanpaths by propagating fixations across frames with Lucas-Kanade.</p>
<p>If a cached result exists and <code class="docutils literal notranslate"><span class="pre">overwrite</span></code> is False, it is loaded from disk.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>sync_gaze</strong><span class="classifier">Stream, optional</span></dt><dd><p>Gaze data synchronised to video frames. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, it is created with
Recording.sync_gaze_to_video().</p>
</dd>
<dt><strong>lk_params</strong><span class="classifier">dict, optional</span></dt><dd><p>Parameters forwarded to the LK optical-flow call.</p>
</dd>
<dt><strong>output_path</strong><span class="classifier">str or pathlib.Path, optional</span></dt><dd><p>Where to save the pickle. Defaults to <code class="docutils literal notranslate"><span class="pre">&lt;der_dir&gt;/scanpath.pkl</span></code>.</p>
</dd>
<dt><strong>overwrite</strong><span class="classifier">bool, optional</span></dt><dd><p>Force recomputation even if a pickle exists.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>Stream</dt><dd><p>Indexed by “timestamp [ns]” with one column “fixations”
containing a nested DataFrame for each video frame.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyneon.Recording.detect_apriltags">
<span class="sig-name descname"><span class="pre">detect_apriltags</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag_family</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'tag36h11'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.14)"><span class="pre">Path</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="stream.html#pyneon.Stream" title="pyneon.stream.Stream"><span class="pre">Stream</span></a></span></span><a class="headerlink" href="#pyneon.Recording.detect_apriltags" title="Link to this definition">#</a></dt>
<dd><p>Detect AprilTags in a video and return their positions per frame.</p>
<p>Runs AprilTag detection on video frames using the <cite>pupil_apriltags</cite> backend.
Uses saved results if available unless <cite>overwrite=True</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>tag_family</strong><span class="classifier">str, optional</span></dt><dd><p>The AprilTag family to detect (e.g., “tag36h11”). Default is “tag36h11”.</p>
</dd>
<dt><strong>overwrite</strong><span class="classifier">bool, optional</span></dt><dd><p>If True, reruns detection even if saved results exist.</p>
</dd>
<dt><strong>output_path</strong><span class="classifier">str or pathlib.Path, optional</span></dt><dd><p>Path to save the detection JSON file. Defaults to <cite>&lt;der_dir&gt;/apriltags.json</cite>.</p>
</dd>
<dt><strong>**kwargs</strong><span class="classifier">keyword arguments</span></dt><dd><dl class="simple">
<dt>Additional parameters for AprilTag detection, including:</dt><dd><ul class="simple">
<li><p>‘nthreads’: Number of threads to use for detection. Default is 4.</p></li>
<li><p>‘quad_decimate’: Decimation factor for the quad detection. Default is 1.0, thus no decimation.</p></li>
<li><p>‘skip_frames’: Number of frames to skip between detections. Default is 1, thus no skipping.</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>Stream</dt><dd><dl class="simple">
<dt>Stream indexed by <cite>“timestamp [ns]”</cite> with one row per detected tag, including:</dt><dd><ul class="simple">
<li><p>‘frame_idx’: Index in the downsampled video sequence</p></li>
<li><p>‘orig_frame_idx’: Original frame index in the full video</p></li>
<li><p>‘tag_id’: ID of the detected AprilTag</p></li>
<li><p>‘corners’: A 4x2 array of tag corner coordinates</p></li>
<li><p>‘center’: A 1x2 array of the tag center</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyneon.Recording.find_homographies">
<span class="sig-name descname"><span class="pre">find_homographies</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag_info</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v3.0.1)"><span class="pre">DataFrame</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">all_detections</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="stream.html#pyneon.Stream" title="pyneon.stream.Stream"><span class="pre">Stream</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.14)"><span class="pre">Path</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="stream.html#pyneon.Stream" title="pyneon.stream.Stream"><span class="pre">Stream</span></a></span></span><a class="headerlink" href="#pyneon.Recording.find_homographies" title="Link to this definition">#</a></dt>
<dd><p>Compute and return homographies for each frame using AprilTag detections and reference marker layout.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>tag_info</strong><span class="classifier">pandas.DataFrame</span></dt><dd><dl class="simple">
<dt>DataFrame containing AprilTag reference positions and orientations, with columns:</dt><dd><ul class="simple">
<li><p>‘tag_id’: ID of the tag</p></li>
<li><p>‘x’, ‘y’, ‘z’: 3D coordinates of the tag’s center</p></li>
<li><p>‘normal_x’, ‘normal_y’, ‘normal_z’: Normal vector of the tag surface</p></li>
<li><p>‘size’: Side length of the tag in meters</p></li>
</ul>
</dd>
</dl>
</dd>
<dt><strong>all_detections</strong><span class="classifier">Stream, optional</span></dt><dd><p>Stream containing AprilTag detection results per frame. If None, detections are recomputed.</p>
</dd>
<dt><strong>overwrite</strong><span class="classifier">bool, optional</span></dt><dd><p>Whether to force recomputation even if saved homographies exist.</p>
</dd>
<dt><strong>output_path</strong><span class="classifier">str or pathlib.Path, optional</span></dt><dd><p>Optional file path for saving the homographies as JSON. If None, defaults to <cite>&lt;der_dir&gt;/homographies.json</cite>.</p>
</dd>
<dt><strong>**kwargs</strong><span class="classifier">keyword arguments</span></dt><dd><dl class="simple">
<dt>Additional parameters for homography computation, including:</dt><dd><ul class="simple">
<li><p>‘coordinate_system’: Coordinate system for the homography (‘opencv’ or ‘psychopy’). Default is ‘opencv’.</p></li>
<li><p>‘surface_size’: Size of the surface in pixels (width, height). Default is (1920, 1080).</p></li>
<li><p>‘skip_frames’: Number of frames to skip between detections. Default is 1.</p></li>
<li><p>‘settings’: Additional settings for the homography computation.</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>Stream</dt><dd><dl class="simple">
<dt>A Stream object indexed by <cite>“timestamp [ns]”</cite> containing:</dt><dd><ul class="simple">
<li><p>‘frame_idx’: Video frame index</p></li>
<li><p>‘homography’: 3x3 NumPy array representing the homography matrix for that frame</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyneon.Recording.gaze_on_surface">
<span class="sig-name descname"><span class="pre">gaze_on_surface</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">homographies</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="stream.html#pyneon.Stream" title="pyneon.stream.Stream"><span class="pre">Stream</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tag_info</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v3.0.1)"><span class="pre">DataFrame</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">synced_gaze</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="stream.html#pyneon.Stream" title="pyneon.stream.Stream"><span class="pre">Stream</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.14)"><span class="pre">Path</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="stream.html#pyneon.Stream" title="pyneon.stream.Stream"><span class="pre">Stream</span></a></span></span><a class="headerlink" href="#pyneon.Recording.gaze_on_surface" title="Link to this definition">#</a></dt>
<dd><p>Project gaze coordinates from eye space to surface space using homographies.</p>
<p>Computes or loads frame-wise homographies and applies them to the synchronized
gaze data to transform it into surface coordinates. If a saved version exists
and <cite>overwrite</cite> is False, the data is loaded from disk.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>homographies</strong><span class="classifier">Stream, optional</span></dt><dd><p>Stream containing precomputed homographies. If None, they are computed from <cite>tag_info</cite>.</p>
</dd>
<dt><strong>tag_info</strong><span class="classifier">pandas.DataFrame, optional</span></dt><dd><p>AprilTag marker info used to compute homographies. Required if <cite>homographies</cite> is None.</p>
</dd>
<dt><strong>synced_gaze</strong><span class="classifier">Stream, optional</span></dt><dd><p>Gaze data aligned to video frames. If None, will be computed using <cite>sync_gaze_to_video()</cite>.</p>
</dd>
<dt><strong>overwrite</strong><span class="classifier">bool, optional</span></dt><dd><p>If True, recompute and overwrite any existing surface-transformed gaze data. Default is False.</p>
</dd>
<dt><strong>output_path</strong><span class="classifier">str or pathlib.Path, optional</span></dt><dd><p>File path to save the resulting CSV. Defaults to <cite>&lt;der_dir&gt;/gaze_on_surface.csv</cite>.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>Stream</dt><dd><dl class="simple">
<dt>A Stream containing gaze data with surface coordinates, including:</dt><dd><ul class="simple">
<li><p>‘frame_idx’: Frame index</p></li>
<li><p>‘x_trans’, ‘y_trans’: Gaze coordinates in surface pixel space</p></li>
<li><p>Any additional columns from the synchronized gaze input</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyneon.Recording.fixations_on_surface">
<span class="sig-name descname"><span class="pre">fixations_on_surface</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gaze_on_surface</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="stream.html#pyneon.Stream" title="pyneon.stream.Stream"><span class="pre">Stream</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.14)"><span class="pre">Path</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="events.html#pyneon.Events" title="pyneon.events.Events"><span class="pre">Events</span></a></span></span><a class="headerlink" href="#pyneon.Recording.fixations_on_surface" title="Link to this definition">#</a></dt>
<dd><p>Project fixation events into surface space by summarizing gaze samples.</p>
<p>This function maps each fixation to surface coordinates by averaging the
surface-transformed gaze points (<cite>x_trans</cite>, <cite>y_trans</cite>) associated with
that fixation. If saved data exists and <cite>overwrite</cite> is False, it is loaded
from disk instead of being recomputed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>gaze_on_surface</strong><span class="classifier">pandas.DataFrame, optional</span></dt><dd><p>DataFrame of gaze coordinates already transformed to surface space.
If None, will be computed via <cite>self.gaze_on_surface()</cite>.
Must include ‘fixation id’, ‘x_trans’, and ‘y_trans’ columns.</p>
</dd>
<dt><strong>overwrite</strong><span class="classifier">bool, optional</span></dt><dd><p>If True, forces recomputation and overwrites any existing output file.
Default is False.</p>
</dd>
<dt><strong>output_path</strong><span class="classifier">str or pathlib.Path, optional</span></dt><dd><p>Custom path to save the resulting fixation data as a CSV.
If None, defaults to <cite>self.der_dir / “fixations_on_surface.csv”</cite>.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>Events</dt><dd><dl class="simple">
<dt>An events object containing:</dt><dd><ul class="simple">
<li><p>All columns from the raw fixations table</p></li>
<li><dl class="simple">
<dt>‘gaze x [surface coord]’<span class="classifier">float</span></dt><dd><p>Mean surface-space x-coordinate for the fixation.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>‘gaze y [surface coord]’<span class="classifier">float</span></dt><dd><p>Mean surface-space y-coordinate for the fixation.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyneon.Recording.estimate_camera_pose">
<span class="sig-name descname"><span class="pre">estimate_camera_pose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag_locations_df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v3.0.1)"><span class="pre">DataFrame</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">all_detections</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="stream.html#pyneon.Stream" title="pyneon.stream.Stream"><span class="pre">Stream</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.14)"><span class="pre">Path</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="stream.html#pyneon.Stream" title="pyneon.stream.Stream"><span class="pre">Stream</span></a></span></span><a class="headerlink" href="#pyneon.Recording.estimate_camera_pose" title="Link to this definition">#</a></dt>
<dd><p>Compute the camera pose (R|t) for every frame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>tag_locations_df</strong><span class="classifier">pandas.DataFrame</span></dt><dd><p>3-D positions, normals and size for every AprilTag (columns:
‘tag_id’,’x’,’y’,’z’,’normal_x’,’normal_y’,’normal_z’,’size’).</p>
</dd>
<dt><strong>all_detections</strong><span class="classifier">Stream, optional</span></dt><dd><p>Per-frame AprilTag detections.  If <code class="docutils literal notranslate"><span class="pre">None</span></code>, they are produced by Recording.detect_apriltags().</p>
</dd>
<dt><strong>output_path</strong><span class="classifier">str or pathlib.Path, optional</span></dt><dd><p>Path to save the resulting camera pose data as a JSON file. Defaults to <cite>&lt;der_dir&gt;/camera_pose.json</cite>.</p>
</dd>
<dt><strong>overwrite</strong><span class="classifier">bool, optional</span></dt><dd><p>If True, forces recomputation and overwrites any existing saved result. Default is False.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>Stream</dt><dd><p>Indexed by “timestamp [ns]” with columns
<code class="docutils literal notranslate"><span class="pre">'frame_idx',</span> <span class="pre">'translation_vector',</span> <span class="pre">'rotation_vector',</span> <span class="pre">'camera_pos'</span></code>.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyneon.Recording.smooth_camera_pose">
<span class="sig-name descname"><span class="pre">smooth_camera_pose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">camera_pose_raw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v3.0.1)"><span class="pre">DataFrame</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.14)"><span class="pre">Path</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v3.0.1)"><span class="pre">DataFrame</span></a></span></span><a class="headerlink" href="#pyneon.Recording.smooth_camera_pose" title="Link to this definition">#</a></dt>
<dd><p>Kalman-smooth camera positions and gate outliers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>camera_pose_raw</strong><span class="classifier">pandas.DataFrame, optional</span></dt><dd><p>Raw camera-pose table with columns <code class="docutils literal notranslate"><span class="pre">'frame_idx'</span></code> and <code class="docutils literal notranslate"><span class="pre">'camera_pos'</span></code>.
If <em>None</em>, tries to load <em>camera_pose.json</em> from <code class="docutils literal notranslate"><span class="pre">self.der_dir</span></code> or
computes it via Recording.estimate_camera_pose().</p>
</dd>
<dt><strong>overwrite</strong><span class="classifier">bool, default False</span></dt><dd><p>Recompute even if a smoothed file already exists.</p>
</dd>
<dt><strong>output_path</strong><span class="classifier">str or pathlib.Path, optional</span></dt><dd><p>Where to save the JSON (<code class="docutils literal notranslate"><span class="pre">smoothed_camera_pose.json</span></code> by default).</p>
</dd>
<dt><strong>kwargs</strong><span class="classifier">dict, optional</span></dt><dd><dl class="simple">
<dt>Optional arguments:</dt><dd><ul class="simple">
<li><p>initial_state_noise: float (default=0.1)</p></li>
<li><p>process_noise: float (default=0.1)</p></li>
<li><p>measurement_noise: float (default=0.01)</p></li>
<li><p>gating_threshold: float (default=2.0)</p></li>
<li><p>bidirectional: bool (default=False)</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>pd.DataFrame</dt><dd><p>Same rows as <em>camera_pose_raw</em> with the extra column
<code class="docutils literal notranslate"><span class="pre">'smoothed_camera_pos'</span></code> (3-vector).</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyneon.Recording.overlay_scanpath">
<span class="sig-name descname"><span class="pre">overlay_scanpath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scanpath</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="stream.html#pyneon.Stream" title="pyneon.stream.Stream"><span class="pre">Stream</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_video</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">video_output_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.14)"><span class="pre">Path</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#pyneon.Recording.overlay_scanpath" title="Link to this definition">#</a></dt>
<dd><p>Render a video with the scan-path overlaid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>scanpath</strong><span class="classifier">Stream, optional</span></dt><dd><p>Nested scan-path table (as from Recording.estimate_scanpath()).
If <em>None</em>, it is loaded or computed automatically.</p>
</dd>
<dt><strong>show_video</strong><span class="classifier">bool</span></dt><dd><p>Display the video live while rendering.</p>
</dd>
<dt><strong>video_output_path</strong><span class="classifier">str or pathlib.Path, optional</span></dt><dd><p>Target MP4 path. Defaults to <cite>&lt;der_dir&gt;/scanpath.mp4</cite>.
If <em>None</em>, no file is written.</p>
</dd>
<dt><strong>overwrite</strong><span class="classifier">bool, default False</span></dt><dd><p>Regenerate the overlay even if the MP4 already exists.</p>
</dd>
<dt><strong>kwargs</strong><span class="classifier">dict, optional</span></dt><dd><dl class="simple">
<dt>Optional arguments:</dt><dd><ul class="simple">
<li><dl class="simple">
<dt>circle_radius: int, default 10</dt><dd><p>Radius of the fixation circles.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>line_thickness: int, default 2</dt><dd><p>Thickness of the fixation lines.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>text_size: int, default 1</dt><dd><p>Size of the fixation text.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>max_fixations: int, default 10</dt><dd><p>Maximum number of fixations to display.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyneon.Recording.overlay_detections_and_pose">
<span class="sig-name descname"><span class="pre">overlay_detections_and_pose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">april_detections</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v3.0.1)"><span class="pre">DataFrame</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">camera_positions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v3.0.1)"><span class="pre">DataFrame</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">room_corners</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">ndarray</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">array([[0,</span> <span class="pre">0],</span> <span class="pre">[0,</span> <span class="pre">1],</span> <span class="pre">[1,</span> <span class="pre">1],</span> <span class="pre">[1,</span> <span class="pre">0]])</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">video_output_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.14)"><span class="pre">Path</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">graph_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">ndarray</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">array([300,</span> <span class="pre">300])</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_video</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyneon.Recording.overlay_detections_and_pose" title="Link to this definition">#</a></dt>
<dd><p>Overlay AprilTag detections and camera poses on the video frames. The resulting video can be displayed and/or saved.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>april_detections</strong><span class="classifier">pandas.DataFrame</span></dt><dd><p>DataFrame containing the AprilTag detections.</p>
</dd>
<dt><strong>camera_positions</strong><span class="classifier">pandas.DataFrame</span></dt><dd><p>DataFrame containing the camera positions.</p>
</dd>
<dt><strong>room_corners</strong><span class="classifier">numpy.ndarray</span></dt><dd><p>Array containing the room corners coordinates. Defaults to a unit square.</p>
</dd>
<dt><strong>video_output_path pathlib.Path or str</strong></dt><dd><p>Path to save the video with detections and poses overlaid. Defaults to ‘detection_and_pose.mp4’.</p>
</dd>
<dt><strong>graph_size</strong><span class="classifier">numpy.ndarray</span></dt><dd><p>Size of the graph to overlay on the video. Defaults to [300, 300].</p>
</dd>
<dt><strong>show_video</strong><span class="classifier">bool</span></dt><dd><p>Whether to display the video with detections and poses overlaid. Defaults to True.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyneon.Recording.clear_der_dir">
<span class="sig-name descname"><span class="pre">clear_der_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">include</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.14)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">['all']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.14)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyneon.Recording.clear_der_dir" title="Link to this definition">#</a></dt>
<dd><p>Clear the derived data directory by removing files and folders.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>include</strong><span class="classifier">str or list of str, optional</span></dt><dd><p>Files or folders to delete. If [“all”], delete everything in the directory.
Supports full names or base names without extensions (e.g. “scanpath” matches “scanpath.pkl”).</p>
</dd>
<dt><strong>exclude</strong><span class="classifier">str or list of str, optional</span></dt><dd><p>Files or folders to exclude. Applies only if include is [“all”].
Also supports base names.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyneon.Recording.export_cloud_format">
<span class="sig-name descname"><span class="pre">export_cloud_format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.14)"><span class="pre">Path</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">rebase</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyneon.Recording.export_cloud_format" title="Link to this definition">#</a></dt>
<dd><p>Export native data to cloud-like format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>target_dir</strong><span class="classifier">str or pathlib.Path</span></dt><dd><p>Output directory to save the Cloud-Format structured data.</p>
</dd>
<dt><strong>rebase</strong><span class="classifier">bool, optional</span></dt><dd><p>If True, re-initialize the recording on the target directory after export.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyneon.Recording.export_motion_bids">
<span class="sig-name descname"><span class="pre">export_motion_bids</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">motion_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.14)"><span class="pre">Path</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra_metadata</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyneon.Recording.export_motion_bids" title="Link to this definition">#</a></dt>
<dd><p>Export IMU data to Motion-BIDS format. Continuous samples are saved to a .tsv
file and metadata (with template fields) are saved to a .json file.
Users should later edit the metadata file according to the experiment to make
it BIDS-compliant.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>motion_dir</strong><span class="classifier">str or pathlib.Path</span></dt><dd><p>Output directory to save the Motion-BIDS formatted data.</p>
</dd>
<dt><strong>prefix</strong><span class="classifier">str, optional</span></dt><dd><p>Prefix for the BIDS filenames, by default “sub-<code class="docutils literal notranslate"><span class="pre">wearer_name``_task-XXX_tracksys-NeonIMU&quot;.</span>
<span class="pre">The</span> <span class="pre">format</span> <span class="pre">should</span> <span class="pre">be</span> <span class="pre">&quot;sub-&lt;label&gt;[_ses-&lt;label&gt;]_task-&lt;label&gt;_tracksys-&lt;label&gt;[_acq-&lt;label&gt;][_run-&lt;index&gt;]&quot;</span>
<span class="pre">(Fields</span> <span class="pre">in</span> <span class="pre">[]</span> <span class="pre">are</span> <span class="pre">optional).</span> <span class="pre">Files</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">saved</span> <span class="pre">as</span>
<span class="pre">``{prefix}_motion.&lt;tsv|json&gt;</span></code>.</p>
</dd>
<dt><strong>extra_metadata</strong><span class="classifier">dict, optional</span></dt><dd><p>Extra metadata to include in the .json file. Keys must be valid BIDS fields.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Motion-BIDS is an extension to the Brain Imaging Data Structure (BIDS) to
standardize the organization of motion data for reproducible research <a class="reference internal" href="#rfe93fe2e8ddd-1" id="id1">[1]</a>.
For more information, see
<a class="reference external" href="https://bids-specification.readthedocs.io/en/stable/modality-specific-files/motion.html">https://bids-specification.readthedocs.io/en/stable/modality-specific-files/motion.html</a>.</p>
<p class="rubric">References</p>
<div role="list" class="citation-list">
<div class="citation" id="rfe93fe2e8ddd-1" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>Jeung, S., Cockx, H., Appelhoff, S., Berg, T., Gramann, K., Grothkopp, S., … &amp; Welzel, J. (2024). Motion-BIDS: an extension to the brain imaging data structure to organize motion data for reproducible research. <em>Scientific Data</em>, 11(1), 716.</p>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyneon.Recording.export_eye_bids">
<span class="sig-name descname"><span class="pre">export_eye_bids</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.14)"><span class="pre">Path</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra_metadata</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyneon.Recording.export_eye_bids" title="Link to this definition">#</a></dt>
<dd><p>Export eye-tracking data to Eye-tracking-BIDS format. Continuous samples
and events are saved to .tsv.gz files with accompanying .json metadata files.
Users should later edit the metadata files according to the experiment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>output_dir</strong><span class="classifier">str or pathlib.Path</span></dt><dd><p>Output directory to save the Eye-tracking-BIDS formatted data.</p>
</dd>
<dt><strong>prefix</strong><span class="classifier">str, optional</span></dt><dd><p>Prefix for the BIDS filenames, by default “sub-XX_recording-eye”.
The format should be <cite>&lt;matches&gt;[_recording-&lt;label&gt;]_&lt;physio|physioevents&gt;.&lt;tsv.gz|json&gt;</cite>
(Fields in [] are optional). Files will be saved as
<code class="docutils literal notranslate"><span class="pre">{prefix}_physio.&lt;tsv.gz|json&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">{prefix}_physioevents.&lt;tsv.gz|json&gt;</span></code>.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Eye-tracking-BIDS is an extension to the Brain Imaging Data Structure (BIDS) to
standardize the organization of eye-tracking data for reproducible research.
The extension is still being finalized. This method follows the latest standards
outlined in <a class="github reference external" href="https://github.com/bids-standard/bids-specification/pull/1128">bids-standard/bids-specification#1128</a>.</p>
</dd></dl>

</dd></dl>

</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="dataset.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Dataset class</p>
      </div>
    </a>
    <a class="right-next"
       href="base_tabular.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">BaseTabular Class</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording"><code class="docutils literal notranslate"><span class="pre">Recording</span></code></a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.gaze"><code class="docutils literal notranslate"><span class="pre">Recording.gaze</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.imu"><code class="docutils literal notranslate"><span class="pre">Recording.imu</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.eye_states"><code class="docutils literal notranslate"><span class="pre">Recording.eye_states</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.blinks"><code class="docutils literal notranslate"><span class="pre">Recording.blinks</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.fixations"><code class="docutils literal notranslate"><span class="pre">Recording.fixations</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.saccades"><code class="docutils literal notranslate"><span class="pre">Recording.saccades</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.events"><code class="docutils literal notranslate"><span class="pre">Recording.events</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.scene_video"><code class="docutils literal notranslate"><span class="pre">Recording.scene_video</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.eye_video"><code class="docutils literal notranslate"><span class="pre">Recording.eye_video</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.start_time"><code class="docutils literal notranslate"><span class="pre">Recording.start_time</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.start_datetime"><code class="docutils literal notranslate"><span class="pre">Recording.start_datetime</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.concat_streams"><code class="docutils literal notranslate"><span class="pre">Recording.concat_streams()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.concat_events"><code class="docutils literal notranslate"><span class="pre">Recording.concat_events()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.plot_distribution"><code class="docutils literal notranslate"><span class="pre">Recording.plot_distribution()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.sync_gaze_to_video"><code class="docutils literal notranslate"><span class="pre">Recording.sync_gaze_to_video()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.estimate_scanpath"><code class="docutils literal notranslate"><span class="pre">Recording.estimate_scanpath()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.detect_apriltags"><code class="docutils literal notranslate"><span class="pre">Recording.detect_apriltags()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.find_homographies"><code class="docutils literal notranslate"><span class="pre">Recording.find_homographies()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.gaze_on_surface"><code class="docutils literal notranslate"><span class="pre">Recording.gaze_on_surface()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.fixations_on_surface"><code class="docutils literal notranslate"><span class="pre">Recording.fixations_on_surface()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.estimate_camera_pose"><code class="docutils literal notranslate"><span class="pre">Recording.estimate_camera_pose()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.smooth_camera_pose"><code class="docutils literal notranslate"><span class="pre">Recording.smooth_camera_pose()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.overlay_scanpath"><code class="docutils literal notranslate"><span class="pre">Recording.overlay_scanpath()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.overlay_detections_and_pose"><code class="docutils literal notranslate"><span class="pre">Recording.overlay_detections_and_pose()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.clear_der_dir"><code class="docutils literal notranslate"><span class="pre">Recording.clear_der_dir()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.export_cloud_format"><code class="docutils literal notranslate"><span class="pre">Recording.export_cloud_format()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.export_motion_bids"><code class="docutils literal notranslate"><span class="pre">Recording.export_motion_bids()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyneon.Recording.export_eye_bids"><code class="docutils literal notranslate"><span class="pre">Recording.export_eye_bids()</span></code></a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/reference/recording.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024-2026, PyNeon developers.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 9.1.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>